<?xml version='1.0' encoding='utf-8'?>
<sdf version="1.7">
	<world name="moving_cube">

	
		<plugin
			filename="libignition-gazebo-physics-system.so"
			name="ignition::gazebo::systems::Physics">
		</plugin>
		<plugin
			filename="libignition-gazebo-user-commands-system.so"
			name="ignition::gazebo::systems::UserCommands">
		</plugin>
		<plugin
			filename="libignition-gazebo-scene-broadcaster-system.so"
			name="ignition::gazebo::systems::SceneBroadcaster">
		</plugin>



		<model name="ground_plane">
			<static>true</static>
			<link name="link">
				<collision name="collision">
					<geometry>
					<plane>
						<normal>0 0 1</normal>
					</plane>
					</geometry>
				</collision>
				<visual name="visual">
					<geometry>
					<plane>
						<normal>0 0 1</normal>
						<size>100 100</size>
					</plane>
					</geometry>
					<material>
						<ambient>0.8 0.8 0.8 1</ambient>
						<diffuse>0.8 0.8 0.8 1</diffuse>
						<specular>0.8 0.8 0.8 1</specular>
					</material>
				</visual>
			</link>
		</model>


		<model name="robot">
			<link name="cube_frame">
				<inertial>
					<pose>0 0 0.5 0 0 0</pose>
					<mass>1</mass>
					<inertia>
						<ixx>0.1</ixx>
						<ixy>0</ixy>
						<ixz>0</ixz>
						<iyy>0.1</iyy>
						<iyz>0</iyz>
						<izz>0.1</izz>
					</inertia>
				</inertial>
				<collision name="cube_frame_collision">
					<pose>0 0 0.5 0 0 0</pose>
					<geometry>
						<box>
							<size>1 1 1</size>
						</box>
					</geometry>
				</collision>
				<visual name="cube_frame_1">
					<pose>0.45 0.45 0.5 0 0 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
				</visual>
				<visual name="cube_frame_2">
					<pose>-0.45 0.45 0.5 0 0 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
				</visual>
				<visual name="cube_frame_3">
					<pose>0.45 -0.45 0.5 0 0 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
				</visual>
				<visual name="cube_frame_4">
					<pose>-0.45 -0.45 0.5 0 0 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
				</visual>
				<visual name="cube_frame_5">
					<pose>0 0.45 0.95 0 1.57 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
				</visual>
				<visual name="cube_frame_6">
					<pose>0 -0.45 0.95 0 1.57 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
				</visual>
				<visual name="cube_frame_7">
					<pose>0 0.45 0.05 0 1.57 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
					</visual>
				<visual name="cube_frame_8">
					<pose>0 -0.45 0.05 0 1.57 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
				</visual>
				<visual name="cube_frame_9">
					<pose>0.45 0 0.95 1.57 0 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
				</visual>
				<visual name="cube_frame_10">
					<pose>0.45 0 0.05 1.57 0 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
				</visual>
				<visual name="cube_frame_11">
					<pose>-0.45 0 0.95 1.57 0 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
				</visual>
				<visual name="cube_frame_12">
					<pose>-0.45 0 0.05 1.57 0 0</pose>
					<geometry>
						<box>
							<size>0.1 0.1 1</size>
						</box>
					</geometry>
					<material>
						<diffuse>0 0 1 1</diffuse>
						<ambient>0 0 1 1</ambient>
					</material>
				</visual>
			</link>
			<joint name="cube_disc_joint" type="revolute">
				<pose relative_to="cube_frame">0 0 0.5 0 0 0</pose>
				<parent>cube_frame</parent>
				<child>disc_link</child>
				<axis>
					<xyz>0 1 0</xyz>
					<limit>
						<effort>1000</effort>
						<velocity>100</velocity>
					</limit>
					
				</axis>
			</joint>
			<link name="disc_link">
				<pose relative_to="cube_disc_joint">0 0 0 0 0 0</pose>
				<inertial>
					<pose>0 0 0 0 0 0</pose>
					<mass>1</mass>
					<inertia>
						<ixx>0.1</ixx>
						<ixy>0</ixy>
						<ixz>0</ixz>
						<iyy>0.1</iyy>
						<iyz>0</iyz>
						<izz>0.1</izz>
					</inertia>
				</inertial>
				<collision name="disc_link_collision">
					<pose>0 0 0 0 0 0</pose>
					<geometry>
						<cylinder>
							<length>0.2</length>
							<radius>0.3</radius>
						</cylinder>
					</geometry>
				</collision>
				<visual name="disc_link_visual">
					<pose>0 0 0 1.57 0 0</pose>
					<geometry>
						<cylinder>
							<length>0.2</length>
							<radius>0.3</radius>
						</cylinder>
					</geometry>
					<material>
						<diffuse>1 0.625 0 1</diffuse>
						<ambient>1 0.625 0 1</ambient>
					</material>
				</visual>
			</link>
		
			
			<plugin filename="libignition-gazebo-joint-controller-system.so" name="ignition::gazebo::systems::JointController">
                <joint_name>cube_disc_joint</joint_name>
                <topic>cmd_vel</topic>
                <axis xyz="0 1 0" /> 
                <use_force_commands>true</use_force_commands>
                <p_gain>0.15</p_gain>
            </plugin>
		</model>



		
		<plugin filename="libignition-gazebo-triggered-publisher-system.so"
		name="ignition::gazebo::systems::TriggeredPublisher">
			<input type="ignition.msgs.Int32" topic="/keyboard/keypress">
				<match field="data">87</match> 
			</input>
			<output type="ignition.msgs.Double" topic="/cmd_vel">
				data: 50.0
			</output>
		</plugin>

		

		
		<plugin filename="libignition-gazebo-triggered-publisher-system.so"
		name="ignition::gazebo::systems::TriggeredPublisher">
			<input type="ignition.msgs.Int32" topic="/keyboard/keypress">
				<match field="data">83</match> 
			</input>
			<output type="ignition.msgs.Double" topic="/cmd_vel">
				data: -50.0
			</output>
		</plugin>

</world></sdf>
